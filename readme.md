# 変愚蛮怒 (Hengband)

[![Release](https://github.com/hengband/hengband/actions/workflows/create-release.yml/badge.svg)](https://github.com/hengband/hengband/actions/workflows/create-release.yml)
[![Spoiler](https://github.com/hengband/hengband/actions/workflows/publish-spoiler-page.yml/badge.svg)](https://github.com/hengband/hengband/actions/workflows/publish-spoiler-page.yml)

*Read this in other languages: [English](/readme-eng.md)*

---

[**変愚蛮怒 (Hengband)**](https://hengband.github.io/) は [Moria](https://umoria.org)/[Angband](https://rephial.org/) から始まる＊band系ローグライクゲームのバリアント(変種)の一種です。直接にはZangbandから派生しています。鉄獄100Fに潜むラストボス『混沌のサーペント』を撃破して『＊勝利＊』を遂げるためには、キャラクターのレベルや装備だけでなく、＊あなた＊自身の習熟が求められます。

---

## ✨ 主な特徴

* **多様なキャラクタービルド:** 職業、種族、性格等の組み合わせで、常に新鮮なプレイヤー体験を
* **広大なダンジョンを探索:** 100階層に及ぶメインダンジョンと、癖に溢れたサブダンジョンの数々
* **戦略的な戦闘:** 敵を知り己を知れ。敵を狩るべきか退くべきかの判断がスリリングに明暗を分ける
* **奥深い収集要素:** 攻略の鍵となるアイテムの確保と、装備品で固めた耐性や打撃力で状況を打破せよ
* **継続的な進化:** angband系バリアントとして２０年以上の更新継続、現在も主にGitHubとDiscordで、意見を集めながら更新中

## 🚀 インストール方法

### Windows

1. 最新の[リリースページ](https://github.com/hengband/hengband/releases)からWindows用バイナリをダウンロードします。
2. ダウンロードしたファイルを任意のフォルダに展開します。
3. 展開したフォルダ内の `hengband.exe` を実行してゲームを開始します。

**オプション機能:**

* **壁紙:** ゲーム内オプション (`オプション -> 背景 -> 壁紙を使う`) で有効化し、`壁紙を選択` で画像を選べます。
* **BGM/効果音:** オプション (`オプション -> BGM` または `効果音`) にチェックを入れると有効になります。詳細は `lib/xtra/music/music.cfg` および `lib/xtra/sound/sound.cfg` を参照してください。

### UNIX / Linux

以下のページの手順を参考にしてください。

* [Ubuntu Linux でソースコードからビルドして実行する](https://github.com/hengband/hengband/wiki/Ubuntu-Linux-%E3%81%A7%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%81%8B%E3%82%89%E3%83%93%E3%83%AB%E3%83%89%E3%81%97%E3%81%A6%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B)

**ゲームの起動例:**

* **ASCIIモード:**

  ```bash
  ./hengband -- -n<ウィンドウ数>
  ```

* **8x8タイルモード:**

  ```bash
  ./hengband -g -- -n<ウィンドウ数>
  ```

* **16x16タイルモード:** (別途タイルセットが必要)

  ```bash
  ./hengband -g -- -a -n<ウィンドウ数>
  ```

* **2倍幅タイルモード:**

  ```bash
  ./hengband -g -- -b -n<ウィンドウ数>
  ```

## 🎮 遊び方ガイド

### 冒険の第一歩

最初は辺境の地のすぐ隣りにある「イークの洞穴」に行くことをお勧めします。ここは最深階に住む「イークの大王」が強敵ですが、それ以外は比較的安全な小さな洞穴です。このダンジョンを征覇できるくらい強くなったら、街の外へ出て様々なダンジョンへ挑戦してみましょう。

広大なワールドマップを移動する際は、多くの食料が必要です。`<`キーで広域マップに入り、目的地に着いたら`>`キーで通常マップに戻るのが便利です。荒野では道や草原は比較的安全ですが、溶岩地帯や海の上は強力なモンスターが潜んでいます。

### 基本操作

8方向への移動に対し、それぞれ以下のキーが対応しています。

オリジナルキー配置(テンキー)

```txt
7 8 9
 \|/
4-5-6
 /|\
1 2 3
```

ローグライクキー配置

```txt
y k u
 \|/
h-.-l
 /|\
b j n
```

コマンドが分からない場合は、`Enter`または`x`キーでコマンドメニューを開けます。`u/Z` のように表記されているものは、オリジナルキー配置では `u`、ローグライクキー配置では `Z` を意味します。

<details>
<summary>コマンド一覧 (クリックで展開)</summary>

以下のコマンドが全てではありませんが、 あまり使わないコマンドはコマンドメニューで選べば十分です。

| カテゴリ   | キー (オリジナル/ローグライク)        | 説明                                 |
| :--------- | :------------------------------------ | :----------------------------------- |
| **移動**   | **テンキー(1-9)** / `h,j,k,l,y,u,b,n` | 各方向へ移動                         |
|            | `5` / `.`                             | その場で留まる                       |
|            | `<`                                   | 階段を上る / 広域マップへ            |
|            | `>`                                   | 階段を下る / 通常マップへ            |
|            | `Shift`+方向                          | 走る                                 |
|            | `Ctrl`+方向                           | 攻撃 / ドア開閉 / 壁を掘る           |
| **道具**   | `r`                                   | 巻物を読む                           |
|            | `q`                                   | 薬を飲む                             |
|            | `u` / `Z`                             | 杖を使う                             |
|            | `a` / `z`                             | 魔法棒を使う                         |
|            | `z` / `a`                             | ロッドを使う                         |
|            | `E`                                   | 食べ物を食べる                       |
|            | `A`                                   | 装備品の特殊能力を使う               |
|            | `F`                                   | ランタンに油を補充する               |
|            | `f` / `t`                             | 飛び道具で攻撃する                   |
| **行動**   | `d`                                   | アイテムを落とす                     |
|            | `g`                                   | アイテムを拾う                       |
|            | `R`                                   | その場で休む（HP・MPの回復）         |
|            | `o`                                   | ドアや箱を開ける                     |
|            | `s`                                   | トラップやドアを探索する             |
|            | `k` / `Ctrl`+`d`                      | アイテムを壊す                       |
|            | `p`                                   | ペットに命令する                     |
| **魔法**   | `m`                                   | 魔法・祈りを使う                     |
|            | `G`                                   | 魔法・祈りを覚える                   |
|            | `U` / `O`                             | 特殊能力を使う                       |
|            | `b` / `P`                             | 持っている本を読む                   |
| **装備**   | `e`                                   | 装備の一覧表示                       |
|            | `w`                                   | 武器・防具などを装備する             |
|            | `t` / `T`                             | 武器・防具などの装備を外す           |
| **確認**   | `i`                                   | 持ち物の一覧表示                     |
|            | `I`                                   | \*鑑定\*した物の能力を見る           |
|            | `l` / `x`                             | 周りを見る                           |
|            | `C`                                   | キャラクターの情報を調べる           |
|            | `M`                                   | 現在の階の全体マップを見る           |
|            | `~`                                   | 様々な重要な情報を見るメニューを開く |
| **その他** | `=`                                   | オプション設定                       |
|            | `$`                                   | 自動拾いファイルを再読み込みする     |
|            | `_`                                   | 自動拾いファイルの編集               |
|            | `n` / `[`                             | 前のコマンドを繰り返す               |
|            | `@`                                   | マクロの設定をする                   |
| **ヘルプ** | `?`                                   | オンライン・ヘルプを開く             |

</details>

### アイテムと地形の基礎知識

#### アイテムシンボル

ゲーム内の主なアイテムのシンボルと、それが表すアイテムの種類です。

| シンボル        | 種類               | 説明                             |
| :-------------- | :----------------- | :------------------------------- |
| `\|`  `/`  `\`  | 刀剣・斧槍・鈍器   | 近接攻撃用の武器                 |
| `}`             | 弓・クロスボウ     | 遠距離攻撃用の武器               |
| `{`             | 矢弾               | 遠隔武器で発射する矢や弾丸       |
| `_` `-`         | 杖・ロッド・魔法棒 | 魔法の力を宿した道具             |
| `,`             | 食料・キノコ       | 空腹を満たす                     |
| `!`             | 薬                 | 飲むことで様々な効果を発揮する   |
| `?`             | 巻物/魔法書        | 読むことで様々な効果を発揮する   |
| `]` `[` `)` `(` | 各種防具           | 体のさまざまな部位に装備する     |
| `=`             | 指輪               | 身につけると特殊な効果を得る     |
| `"`             | アミュレット       | 身につけると特殊な効果を得る     |
| `$`             | 財宝               | 拾うと所持金が増える             |
| `&`             | 箱                 | 開けるとアイテムや財宝が出てくる |

#### 装備品の表記

| 表記      | 説明                                                                |
| :-------- | :------------------------------------------------------------------ |
| `(XdY)`   | **基本ダメージ:** Y面ダイスをX個振った合計値。                      |
| `(+h,+d)` | **命中/ダメージ修正:** `+h`は命中率、`+d`はダメージへの修正。       |
| `[a,+b]`  | **防御力(AC):** `a`は防具本来のAC、`+b`は魔法による増強。           |
| `(+p)`    | **能力修正:** 基礎能力値、隠密、探索、スピードなどが`p`上昇します。 |
| `(xn)`    | **ダメージ倍率:** 飛び道具のダメージ倍率。                          |

**例1:** `(聖戦者)ダガー (2d4) (+10,+15) [+2] (+3)`
> 基本ダメージ2d4、命中+10、ダメージ+15、AC+2、さらに何らかの能力が+3されます。

**例2:** `エルフの鎖かたびら (-2) [14,+12] (+3隠密)`
> 命中-2、AC+26、隠密行動能力が+3されます。

アイテム名の頭に★や☆がついているものはアーティファクトと呼ばれ、世界に1つしか存在しません。★がついたものは最初から用意されているもので、発見したものは知識コマンド`~`の「既知の伝説のアイテム」で見ることができます。

全ての★や☆がついたアイテムや、多くの名のあるアイテムのように見ただけでは効果が分からないものは、\*鑑定\*することによってそのアイテムの能力を完全に知ることができます。

#### 地形

自分のいる場所の地形によって様々な影響を受けます。周りを見るコマンド (`l` または `x`) でそこの地形が何かを調べることができます。

| シンボル | 地形               | 説明                                                                 |
| :------- | :----------------- | :------------------------------------------------------------------- |
| `.`      | 床、地面           | 普通に通行可能。                                                     |
| `#`      | 壁、木、草、深い穴 | 壁は通行不可。それ以外は職業や能力によって制限されることがあります。 |
| `~`      | 水、溶岩           | 浮遊能力がなかったり、過重状態ではダメージを受けることがあります。   |
| `^`      | 山、トラップ       | 山は浮遊能力で通行可能。トラップは様々な悪い効果をもたらします。     |
| `<` `>`  | 階段、坑道         | 階層を移動します。                                                   |

## 💡 高度な機能

### マクロ

一連のキー操作を一つのキーに割り当てることができます。

1. `@`キーでマクロ設定画面を開きます。
2. 「マクロの作成」を選び、トリガーとなるキーを押します。
3. 割り当てたい一連のキー操作（例: `maa`）を入力します。
4. 「ファイルにマクロを追加」で設定を保存できます。`.prf`という拡張子でキャラクター名を指定すると、そのキャラクターでプレイする際に自動で読み込まれます。

### 銘 (アイテムへのタグ付け)

`{`コマンドでアイテムに「銘」を付け、特別な機能を持たせることができます。

| 銘の例   | 効果                                                                                                     |
| :------- | :------------------------------------------------------------------------------------------------------- |
| `=g`     | アイテムを自動で拾います。矢弾に刻んでおくと便利です。                                                   |
| `@a?`    | コマンド`a`でアイテムを選択する際に`?`キーでこのアイテムを指定できます。 (例: `@ma`)                     |
| `@?`     | 任意のコマンドでアイテムを選択する際に`?`キーでこのアイテムを指定できます。`?`は0～9の数字のみ使えます。 |
| `!a`     | コマンド`a`でアイテムを選択した際に確認メッセージを表示します。 (例: `!r`で誤読防止)                     |
| `.`      | ランダムテレポートの確認メッセージを抑制します。                                                         |
| `$`      | アイテムが発する警告による確認メッセージを抑制します。                                                   |
| `^a`     | この銘が付いたアイテムを装備中、コマンド`a`の使用時に確認が入ります。 (例: `^k`で誤破壊防止)             |
| `%` `%%` | アイテムの耐性や能力を自動で銘に変換します。(`%`:漢字, `%%`:英字)                                        |
| `#`      | '#'以降に書かれた名前のアーティファクトであるかのように表示します。アイテムの効能は一切変わりません。    |

### 自動拾い・自動破壊

* **簡易設定:** オプションメニュー(`=`)から「常にアイテムを拾う」や「アイテムの自動破壊を使用する」を有効にできます。
* **詳細設定:** `_`キーで設定ファイルを開き、細かなルールを記述できます。詳細は`autopick.txt`を参照してください。

### グラフィックタイル

Windows/Macではメニューから、Linuxでは起動オプションでグラフィック表示を有効にできます。

* **8x8タイル:** `-g`
* **16x16タイル:** `-g -- -a` (別途タイルセットの配置が必要)
* **2倍幅タイル:** `-g -- -b` (タイルが大きく表示されます)
* **大画面表示:** ウィンドウサイズをマウスで変更すると、マップの表示領域が広がります。

## 🌐 コミュニティと貢献

変愚蛮怒は、皆様の貢献を歓迎します！
バグ報告、機能提案、コードの改善など、どんな形でもプロジェクトの発展に繋がります。

* **GitHubリポジトリ:** [https://github.com/hengband/hengband](https://github.com/hengband/hengband)
* **Issue Tracker:** [https://github.com/hengband/hengband/issues](https://github.com/hengband/hengband/issues)

## 📚 その他の情報

### プレイ記録

ゲーム中の様々な行動がプレイ記録として保存されます。記録は`|`コマンドで閲覧できます。

* **保存場所:**
  * UNIX系: `~/.angband/Hengband/playrecord-(名前).txt`
  * その他OS: `lib/user/playrecord-(名前).txt`
* **設定:** オプション(`=`)の「プレイ記録オプション」で記録する項目を変更できます。

### スコア登録

死亡時や引退時に、スコアをインターネット上のサーバーに登録し、公開することができます。チートやバックアップを利用したプレイでの登録はご遠慮ください。

* [スコアサーバ](https://hengband.github.io/score.html)
